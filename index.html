<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chill Guy ì¸¡ì •ê¸°</title>
  <style>
    /* ì „ì²´ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
    body {
      font-family: 'Comic Sans MS', sans-serif;
      background: #e8f5e9; /* ì—°í•œ ë¯¼íŠ¸ ê·¸ë¦° ë°°ê²½ */
      color: #2e7d32; /* ì§„í•œ ë…¹ìƒ‰ í…ìŠ¤íŠ¸ */
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      height: fit-content;
    }

    /* ì»¨í…Œì´ë„ˆ: ëª¨ë°”ì¼ í™”ë©´ ì¤‘ì•™ ì •ë ¬ */
    #quiz-container, #result {
      max-width: 430px; /* ì•„ì´í° 16 ë„ˆë¹„ë¡œ ë³€ê²½ */
      width: calc(100% - 32px); /* íŒ¨ë”©ì„ ê³ ë ¤í•œ ì „ì²´ ë„ˆë¹„ */
      margin: 20px auto;
      padding: 20px 16px;
      background: #f1f8e9; /* ë§¤ìš° ì—°í•œ ì—°ë‘ìƒ‰ ë°°ê²½ */
      border: 2px solid #aed581; /* íŒŒìŠ¤í…” ì—°ë‘ìƒ‰ í…Œë‘ë¦¬ */
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      text-align: center;
      box-sizing: border-box; /* íŒ¨ë”©ì„ ë„ˆë¹„ì— í¬í•¨ */
    }

    /* ì§ˆë¬¸ í…ìŠ¤íŠ¸ */
    .question {
      font-size: 18px;
      margin-bottom: 20px;
      text-align: left;
      line-height: 1.5;
    }

    /* ì§ˆë¬¸ ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ ìˆ˜ì • */
    .question-image {
      width: 100%;
      aspect-ratio: 1 / 1; /* ì •ì‚¬ê°í˜• ë¹„ìœ¨ */
      margin: 20px 0;
      background-color: #dcedc8;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ë³´ê¸° ë²„íŠ¼ */
    .option {
      display: block;
      margin: 10px 0;
      padding: 16px;
      background: #dcedc8;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      width: 100%;
      text-align: left;
      color: #33691e;
    }
    .option:hover {
      background: #c5e1a5; /* í˜¸ë²„ ì‹œ ì•½ê°„ ì§„í•œ ì—°ë‘ìƒ‰ */
    }

    /* ê²°ê³¼ ì°½ */
    #result {
      display: none;
      max-width: 430px;
      width: calc(100% - 32px);
      margin: 20px auto;
      padding: 24px 16px;
      background: #f1f8e9;
      border: 2px solid #aed581;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      box-sizing: border-box;
    }

    .result-title {
      font-size: 24px;
      color: #2e7d32;
      margin-bottom: 20px;
      text-align: center;
    }

    /* ê²°ê³¼ ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ ìˆ˜ì • */
    .result-image {
      width: 100%;
      aspect-ratio: 1 / 1; /* ì •ì‚¬ê°í˜• ë¹„ìœ¨ */
      margin: 20px 0;
      background-color: #dcedc8;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .result-button {
      display: block;
      width: 100%;
      padding: 16px;
      background: #aed581;
      color: #33691e;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .result-button:hover {
      background: #c5e1a5;
    }

    .share-button {
      margin-top: 8px;
      background: #81c784; /* ì•½ê°„ ë‹¤ë¥¸ ë…¹ìƒ‰ ê³„ì—´ë¡œ êµ¬ë¶„ */
    }

    .share-button:hover {
      background: #a5d6a7;
    }

    /* ì‹œì‘ í™”ë©´ ìŠ¤íƒ€ì¼ */
    #start-container {
      width: 100%;
      height: 100vh;
      background-image: url('background.webp'); /* ë°°ê²½ ì´ë¯¸ì§€ ì¶”ê°€ */
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      padding: 40px 20px;
      box-sizing: border-box;
    }

    .title {
      font-size: 32px;
      font-weight: bold;
      color: #fff; /* ë°°ê²½ ì´ë¯¸ì§€ì— ë”°ë¼ ì¡°ì ˆ í•„ìš” */
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      margin-top: 40px;
    }

    .start-button {
      background: #aed581;
      color: #33691e;
      border: none;
      padding: 15px 40px;
      font-size: 20px;
      border-radius: 25px;
      cursor: pointer;
      margin-bottom: 40px;
      transition: background 0.3s ease;
    }

    .start-button:hover {
      background: #c5e1a5;
    }

    /* ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ìˆ˜ì • */
    #quiz-container {
      display: none;
      max-width: 430px;
      width: calc(100% - 32px);
      margin: 20px auto;
      padding: 24px 16px;
      background: #f1f8e9;
      border: 2px solid #aed581;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      box-sizing: border-box;
    }

    /* íƒ‘ë°” ìŠ¤íƒ€ì¼ ì¶”ê°€ */
    .topbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 40px;
      background: rgba(241, 248, 233, 0.95);
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding: 0 16px;
      z-index: 1000;
      border-bottom: 1px solid #aed581;
    }

    .language-switcher {
      display: flex;
      gap: 8px;
      font-size: 14px;
      color: #33691e;
    }

    .language-btn {
      background: none;
      border: none;
      padding: 4px;
      cursor: pointer;
      color: #33691e;
      opacity: 0.5;
      font-size: 14px;
    }

    .language-btn.active {
      opacity: 1;
      font-weight: bold;
    }

    /* ê¸°ì¡´ ì»¨í…Œì´ë„ˆë“¤ì˜ ìƒë‹¨ ì—¬ë°± ì¡°ì • */
    #start-container {
      padding-top: 60px;
    }

    #quiz-container, #result {
      margin-top: 60px;
    }

    /* ì ìˆ˜ í‘œì‹œ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
    .score-text {
      font-size: 14px;
      color: #33691e;
      text-align: center;
      margin-bottom: 12px;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="topbar-left">
      <button id="musicToggle" class="music-button">
        ğŸ”Š
      </button>
    </div>
    <div class="language-switcher">
      <button class="language-btn active" onclick="changeLanguage('ko')" data-lang="ko">ko</button>
      |
      <button class="language-btn" onclick="changeLanguage('en')" data-lang="en">en</button>
    </div>
  </div>

  <audio id="bgm" loop>
    <source src="background.mp3" type="audio/mp3" preload="auto" autoplay>
  </audio>

  <div id="start-container">
    <h1 class="title">Chill Guy ì¸¡ì •ê¸°</h1>
    <button class="start-button" onclick="startQuiz()">ì¸¡ì •</button>
  </div>

  <div id="quiz-container">
    <!-- ì§ˆë¬¸ê³¼ ë³´ê¸° -->
  </div>

  <div id="result">
    <h2 class="result-title"><span id="result-text"></span></h2>
    <div class="result-image">
      <!-- ê²°ê³¼ ì´ë¯¸ì§€ ë“¤ì–´ê°ˆ ìë¦¬ -->
    </div>
    <button class="result-button" onclick="restartQuiz()">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
    <button class="result-button share-button" onclick="saveAsImage()">ê²°ê³¼ ì €ì¥í•˜ê¸°</button>
  </div>

  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

  <script>
    // ì–¸ì–´ ë°ì´í„° ì¶”ê°€
    const translations = {
      ko: {
        title: 'Chill Guy ì¸¡ì •ê¸°',
        startButton: 'ì¸¡ì •',
        restartButton: 'ë‹¤ì‹œ ì‹œì‘í•˜ê¸°',
        saveButton: 'ê²°ê³¼ ì €ì¥í•˜ê¸°',
        questions: [
          {
            question: "ë‹¹ì‹ ì€ ì„ í’ê¸° ë°”ëŒì´ ì§ë°©ìœ¼ë¡œ ì˜¤ì§€ ì•Šì•„ ë•€ì´ íë¥´ê³  ìˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ ëŒ€ì²˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
            image: "q1.webp",
            options: [
              { text: "ê·¸ëƒ¥ ë”ìš´ ê±´ ìì—°ì˜ ì¼ë¶€ë¼ê³  ìƒê°í•˜ë©° ë•€ì„ í˜ë¦°ë‹¤. ì´ê²ƒì´ ì—¬ë¦„ì´ë‹¤.", score: 3 },
              { text: "ì„ í’ê¸° ê·¼ì²˜ë¡œ ì´ë™í•˜ë©° ìì—°ìŠ¤ëŸ½ê²Œ ë°”ëŒì„ ë°›ëŠ”ë‹¤. ë§ˆì¹˜ ìš°ì£¼ì˜ íë¦„ì²˜ëŸ¼.", score: 2 },
              { text: "ê°€ê¹Œìš´ ë¶€ì±„ë¥¼ ì°¾ì•„ë“¤ê³  ì²œì²œíˆ ë¶€ì±„ì§ˆí•œë‹¤. ì²œì²œíˆ.", score: 1 },
              { text: "ë•€ì„ ë‹¦ìœ¼ë©° ì°½ë¬¸ì„ ì—´ê³  ë°–ì„ ë³¸ë‹¤. ë© ë•Œë¦¬ëŠ” ê²Œ ìµœê³ ë‹¤.", score: 0 },
            ],
          },
          {
            question: "ì¹œêµ¬ê°€ ì•½ì† ì‹œê°„ì— 30ë¶„ì´ë‚˜ ëŠ¦ì—ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë°˜ì‘ì€?",
            image: "q2.webp",
            options: [
              { text: "ê´œì°®ì•„, ë‚˜ë„ ë°©ê¸ˆ ì™”ì–´~ (ì‚¬ì‹¤ ì œì‹œê°„ì— ë„ì°©í–ˆë‹¤)", score: 3 },
              { text: "ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ì—¬ìœ ë¡­ê²Œ ìŒì•…ì„ ë“£ê³  ìˆì—ˆì–´", score: 2 },
              { text: "ì»¤í”¼ í•œ ì” ë§ˆì‹œë©´ì„œ ê¸°ë‹¤ë¦¬ê³  ìˆì—ˆì–´", score: 1 },
              { text: "ë‹¤ìŒë¶€í„´ ì¼ì° ì™€ì¤¬ìœ¼ë©´ ì¢‹ê² ë‹¤~ (ì›ƒìœ¼ë©°)", score: 0 },
            ],
          },
          {
            question: "ì¼ì´ ë„ˆë¬´ ë§ì•„ ì•¼ê·¼ì„ í•´ì•¼ í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
            image: "q3.webp",
            options: [
              { text: "ë‚´ì¼ì˜ ë‚˜ì—ê²Œ ì„ ë¬¼ì„ ì£¼ì. ì˜¤ëŠ˜ì€ ì§‘ì— ê°„ë‹¤", score: 3 },
              { text: "í•  ìˆ˜ ìˆëŠ” ë§Œí¼ë§Œ í•˜ê³  ê°€ì. ê±´ê°•ì´ ìµœê³ ë‹¤", score: 2 },
              { text: "ì¡°ê¸ˆë§Œ ë” í•˜ë‹¤ê°€ ê°€ì•¼ê² ë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì§€ ë§ì", score: 1 },
              { text: "ë¹¨ë¦¬ ëë‚´ê³  ê°€ì. ì—´ì‹¬íˆ í•˜ë©´ ëœë‹¤", score: 0 },
            ],
          },
          {
            question: "ì£¼ë§ì— ê°‘ìê¸° ì•½ì†ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€?",
            image: "q4.webp",
            options: [
              { text: "ì˜¤íˆë ¤ ì¢‹ì•„. ì§‘ì´ ìµœê³ ì•¼", score: 3 },
              { text: "ì¢‹ì€ ê¸°íšŒêµ°. ë‚˜ë§Œì˜ ì‹œê°„ì„ ê°€ì§€ì", score: 2 },
              { text: "ë‹¤ë¥¸ ì¹œêµ¬ë¥¼ ë§Œë‚ ê¹Œ? ì•„ë‹ˆì•¼, ê·¸ëƒ¥ ì‰¬ì", score: 1 },
              { text: "ë‹¤ìŒì„ ê¸°ì•½í•˜ë©° ë„·í”Œë¦­ìŠ¤ë¥¼ ë³¸ë‹¤", score: 0 },
            ],
          },
          {
            question: "ê¸¸ê°€ë‹¤ê°€ ë°œì— ê»Œì´ ë¶™ì—ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë°˜ì‘ì€?",
            image: "q5.avif",
            options: [
              { text: "ì´ê²ƒë„ ì¸ìƒì˜ ì¼ë¶€ì§€ ë­~ ì²œì²œíˆ ë–¼ë©´ ë˜ì§€", score: 3 },
              { text: "ê·€ì°®ë„¤~ ê·¸ë˜ë„ ì–´ì©” ìˆ˜ ì—†ì§€", score: 2 },
              { text: "ê·¼ì²˜ í¸ì˜ì ì—ì„œ ë¬¼í‹°ìŠˆë¥¼ ì‚¬ì", score: 1 },
              { text: "ì•„... ì§œì¦ë‚˜ë„¤. ë¹¨ë¦¬ ë–¼ì•¼ê² ë‹¤", score: 0 },
            ],
          },
          {
            question: "í‡´ê·¼ê¸¸ì— ì—„ì²­ë‚œ traffic jamì— ê±¸ë ¸ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€?",
            image: "q6.webp",
            options: [
              { text: "ì°¨ê°€ ë§‰íˆë„¤~ ìŒì•…ì´ë‚˜ ë“¤ìœ¼ë©´ì„œ ê°€ì", score: 3 },
              { text: "ì´ ì‹œê°„ì— ëª…ìƒì´ë‚˜ í•´ë³¼ê¹Œ?", score: 2 },
              { text: "ìš°íšŒë„ë¡œë¥¼ ì°¾ì•„ë³´ì. ì²œì²œíˆ", score: 1 },
              { text: "ë‹¤ìŒë¶€í„´ ì´ ì‹œê°„ì€ í”¼í•´ì„œ ê°€ì•¼ì§€", score: 0 },
            ],
          },
          {
            question: "ë§ˆì§€ë§‰ ì§ˆë¬¸ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì¸ìƒ ëª¨í† ëŠ”?",
            image: "q7.webp",
            options: [
              { text: "ì¸ìƒì€ í˜ëŸ¬ê°€ëŠ” ëŒ€ë¡œ. ëª¨ë“  ê²Œ Fineí•´", score: 3 },
              { text: "ì²œì²œíˆ ê°€ë„ ê´œì°®ì•„. ê²°êµ­ ë‹¤ ì˜ë  ê±°ì•¼", score: 2 },
              { text: "ê¸ì •ì ìœ¼ë¡œ ìƒê°í•˜ë©´ ê¸ì •ì ì¸ ì¼ì´ ìƒê²¨", score: 1 },
              { text: "ì—´ì‹¬íˆ ì‚´ì. ê·¸ë˜ë„ ì—¬ìœ ë¡­ê²Œ", score: 0 },
            ],
          },
        ],
        results: {
          score21: {
            text: "âœ¨ ì„¸ìƒ ëª¨ë“  ê²Œ Fineí•´. ë„¤ ì£¼ë³€ì€ ì–¸ì œë‚˜ Chillí•œ ì—ë„ˆì§€ë¡œ ê°€ë“í•´",
            image: "score21.webp"
          },
          score20: {
            text: "ğŸŒŠ í‰í™”ë¡œìš´ íë¦„ ê·¸ ìì²´. ë„¤ê°€ ìˆëŠ” ê³³ì´ ë°”ë¡œ Chill Zoneì´ì•¼",
            image: "score20.webp"
          },
          score18: {
            text: "ğŸ§˜â€â™‚ï¸ ì™„ë²½í•˜ì§„ ì•Šì•„ë„ Fineí•´. ë„¤ ì•ˆì˜ í‰í™”ê°€ ê³§ Chillì´ë‹ˆê¹Œ",
            image: "score18.webp"
          },
          score16: {
            text: "ğŸƒ ììœ ë¡­ê²Œ í˜ëŸ¬ê°€ëŠ” ì¤‘. Everything's Chill, Everything's Fine",
            image: "score16.webp"
          },
          score13: {
            text: "ğŸ‘€ ì²œì²œíˆ ë°”ë¼ë³´ëŠ” ë„¤ ë°©ì‹ì´ Fineí•´. ê·¸ê²Œ ë°”ë¡œ ì§„ì •í•œ Chill",
            image: "score13.webp"
          },
          score10: {
            text: "âš–ï¸ ë°¸ëŸ°ìŠ¤ì˜ ë‹¬ì¸. ì–´ë–¤ ìˆœê°„ì—ë„ Chillí•˜ê²Œ ë°›ì•„ë“¤ì—¬",
            image: "score10.webp"
          },
          score7: {
            text: "ğŸ® ì—¬ìœ ë¡œìš´ ë¯¸ì†Œê°€ ë§¤ë ¥ì´ì•¼. Keep Calm and Stay Chill",
            image: "score7.webp"
          },
          score4: {
            text: "ğŸ¤” ê¹Šì€ ìƒê°ë„ Fineí•´. ê·¸ ì†ì—ì„œ ì°¾ì€ í‰í™”ê°€ ë„ˆë§Œì˜ Chill",
            image: "score4.webp"
          },
          score0: {
            text: "âš¡ ì—´ì • ê°€ë“í•œ ê²Œ Fineí•´. ê·¸ë˜ë„ ë§ˆìŒë§Œì€ ì–¸ì œë‚˜ Chill",
            image: "score0.webp"
          }
        }
      },
      en: {
        title: 'Chill Guy Test',
        startButton: 'Start',
        restartButton: 'Restart',
        saveButton: 'Save Result',
        questions: [
          {
            question: "The fan isn't blowing directly at you and you're sweating. What do you do?",
            image: "q1.webp",
            options: [
              { text: "Just sweat it out. Heat is part of nature. This is summer.", score: 3 },
              { text: "Move closer to the fan and let the wind blow naturally. It's like the flow of the universe.", score: 2 },
              { text: "Find a nearby fan and gently fan yourself. Slowly.", score: 1 },
              { text: "Wipe your face and open the window to see outside. It's the best.", score: 0 },
            ],
          },
          {
            question: "Your clothes got wet from the ice drink on the beach. What do you do?",
            image: "q2.webp",
            options: [
              { text: "Just accept it as a memory. The clothes will dry by themselves.", score: 3 },
              { text: "Don't worry about it and drink more. I'm thirsty.", score: 2 },
              { text: "Dry the wet clothes by feeling the breeze. The beach is usually like this.", score: 1 },
              { text: "Carefully unfold the clothes and enjoy the wet state. Everything is fine.", score: 0 },
            ],
          },
          {
            question: "Your sunglasses broke suddenly. It's very sunny. What do you do?",
            image: "q3.webp",
            options: [
              { text: "Hold the broken sunglasses with both hands and style it. Imperfection is also a style.", score: 3 },
              { text: "Put on the sunglasses and enjoy the sun's warmth.", score: 2 },
              { text: "Find a shady spot and walk slowly. There's always a shadow.", score: 1 },
              { text: "Look at the broken sunglasses and say 'It's possible'.", score: 0 },
            ],
          },
          {
            question: "Sauce got on your clothes while eating pizza. What do you do?",
            image: "q4.webp",
            options: [
              { text: "Carefully inspect the sauce on your clothes. And think it's the soul of pizza.", score: 3 },
              { text: "Carefully fold the clothes and eat it. Pizza comes first.", score: 2 },
              { text: "Wipe off the sauce on your clothes gently and organize the situation.", score: 1 },
              { text: "Wipe off the sauce on your clothes with your hand and use a tissue.", score: 0 },
            ],
          },
          {
            question: "Your friend lost a game and is angry. What do you do?",
            image: "q5.webp",
            options: [
              { text: "Just watch the friend's anger for a moment and smile. 'Maybe you'll win the next game.'", score: 3 },
              { text: "Give the friend a drink and avoid talking about the game. 'It's okay, it's okay.'", score: 2 },
              { text: "Just wait quietly on the side until the anger fades away.", score: 1 },
              { text: "Change the topic. 'What about dinner tonight?'", score: 0 },
            ],
          },
          {
            question: "You were holding your phone and charging it on the bed, but the charger broke. What do you do?",
            image: "q6.webp",
            options: [
              { text: "Just look at the ceiling. It's just a peaceful moment.", score: 3 },
              { text: "Accept that the charger broke as part of fate and sleep.", score: 2 },
              { text: "Continue to hold the charger and waste time.", score: 1 },
              { text: "Observe the broken charger and think 'When did it start to break?'", score: 0 },
            ],
          },
          {
            question: "It's raining and you lost your umbrella. What do you do?",
            image: "q7.webp",
            options: [
              { text: "Just walk leisurely while getting wet. It's okay if it gets wet. Today is special.", score: 3 },
              { text: "Hide from the rain in a nearby place and just look away for a moment.", score: 2 },
              { text: "Cover your head with your hand and walk slowly. The rain might be a blessing.", score: 1 },
              { text: "Listen to the sound of rain and look at the sky. Everything is quiet.", score: 0 },
            ],
          },
        ],
        results: {
          score21: {
            text: "âœ¨ Everything's Fine around you. Your presence brings the ultimate Chill vibes",
            image: "score21.webp"
          },
          score20: {
            text: "ğŸŒŠ Pure peace in motion. Wherever you are becomes the Chill Zone",
            image: "score20.webp"
          },
          score18: {
            text: "ğŸ§˜â€â™‚ï¸ Perfectly imperfect and Fine. Your inner peace is pure Chill",
            image: "score18.webp"
          },
          score16: {
            text: "ğŸƒ Going with the flow. Everything's Chill, Everything's Fine",
            image: "score16.webp"
          },
          score13: {
            text: "ğŸ‘€ Taking it slow is Fine. That's what makes you genuinely Chill",
            image: "score13.webp"
          },
          score10: {
            text: "âš–ï¸ Master of balance. Keeping it Chill in every moment",
            image: "score10.webp"
          },
          score7: {
            text: "ğŸ® That peaceful smile says it all. Keep Calm and Stay Chill",
            image: "score7.webp"
          },
          score4: {
            text: "ğŸ¤” Deep thoughts are Fine. Finding your Chill in contemplation",
            image: "score4.webp"
          },
          score0: {
            text: "âš¡ Passionate soul with a Chill mind. That's perfectly Fine",
            image: "score0.webp"
          }
        }
      }
    };

    let currentLang = 'ko';

    // ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
    function changeLanguage(lang) {
      currentLang = lang;
      
      // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
      document.querySelectorAll('.language-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });
      
      // í˜„ì¬ í™”ë©´ ìƒíƒœì— ë”°ë¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      updateTexts();
    }

    // í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateTexts() {
      const t = translations[currentLang];
      
      // ì‹œì‘ í™”ë©´ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      document.querySelector('.title').textContent = t.title;
      document.querySelector('.start-button').textContent = t.startButton;
      
      // í˜„ì¬ ë³´ì´ëŠ” í™”ë©´ì— ë”°ë¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      if (quizContainer.style.display === 'block') {
        renderQuestion(); // í˜„ì¬ ì§ˆë¬¸ ë‹¤ì‹œ ë Œë”ë§
      } else if (resultContainer.style.display === 'block') {
        showResult(); // ê²°ê³¼ ë‹¤ì‹œ ë Œë”ë§
      }
      
      // ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      document.querySelectorAll('.result-button').forEach(btn => {
        if (btn.onclick.toString().includes('restartQuiz')) {
          btn.textContent = t.restartButton;
        } else if (btn.onclick.toString().includes('saveAsImage')) {
          btn.textContent = t.saveButton;
        }
      });
    }

    let currentQuestionIndex = 0;
    let totalScore = 0;

    const quizContainer = document.getElementById("quiz-container");
    const resultContainer = document.getElementById("result");
    const resultText = document.getElementById("result-text");

    // ë°°ì—´ ì„ê¸° í•¨ìˆ˜
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // ì§ˆë¬¸ í™”ë©´ ë Œë”ë§
    function renderQuestion() {
      const currentQuestion = translations[currentLang].questions[currentQuestionIndex];
      const shuffledOptions = shuffleArray([...currentQuestion.options]);
      
      const questionNumber = currentQuestionIndex === translations[currentLang].questions.length - 1 
        ? 'Chill.' 
        : `${currentQuestionIndex + 1}.`;
      
      quizContainer.innerHTML = `
        <div class="question">
          ${questionNumber} ${currentQuestion.question}
        </div>
        <div class="question-image">
          <img src="${currentQuestion.image}" alt="Question Image" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
        </div>
        ${shuffledOptions
          .map(
            (option) => `
            <button class="option" onclick="selectOption(${option.score})">${option.text}</button>
          `
          )
          .join("")}
      `;
    }

    // ì˜µì…˜ ì„ íƒ
    function selectOption(score) {
      totalScore += score;
      currentQuestionIndex++;
      if (currentQuestionIndex < translations[currentLang].questions.length) {
        renderQuestion();
      } else {
        showResult();
      }
    }

    // ê²°ê³¼ ë³´ì—¬ì£¼ê¸°
    function showResult() {
      quizContainer.style.display = "none";
      let resultMessage = "";
      const t = translations[currentLang];
      
      if (totalScore >= 21) {
        resultMessage = t.results.score21.text;
      } else if (totalScore === 20) {
        resultMessage = t.results.score20.text;
      } else if (totalScore >= 18) {
        resultMessage = t.results.score18.text;
      } else if (totalScore >= 16) {
        resultMessage = t.results.score16.text;
      } else if (totalScore >= 13) {
        resultMessage = t.results.score13.text;
      } else if (totalScore >= 10) {
        resultMessage = t.results.score10.text;
      } else if (totalScore >= 7) {
        resultMessage = t.results.score7.text;
      } else if (totalScore >= 4) {
        resultMessage = t.results.score4.text;
      } else {
        resultMessage = t.results.score0.text;
      }
      
      resultContainer.innerHTML = `
        <div class="score-text">${currentLang === 'ko' ? `ë„ˆì˜ ì ìˆ˜ëŠ” ${totalScore}ì ì´ì•¼.` : `Your score is ${totalScore}.`}</div>
        <h2 class="result-title">${resultMessage}</h2>
        <div class="result-image">
          <!-- ê²°ê³¼ ì´ë¯¸ì§€ ë“¤ì–´ê°ˆ ìë¦¬ -->
        </div>
        <button class="result-button" onclick="restartQuiz()">${t.restartButton}</button>
        <button class="result-button share-button" onclick="saveAsImage()">${t.saveButton}</button>
      `;
      
      resultContainer.style.display = "block";
    }

    // í€´ì¦ˆ ë‹¤ì‹œ ì‹œì‘
    function restartQuiz() {
      currentQuestionIndex = 0;
      totalScore = 0;
      resultContainer.style.display = "none";
      document.getElementById('start-container').style.display = "flex";
      quizContainer.style.display = "none";
    }

    // í€´ì¦ˆ ì‹œì‘ í•¨ìˆ˜ ìˆ˜ì •
    function startQuiz() {
      document.getElementById('start-container').style.display = 'none';
      document.getElementById('quiz-container').style.display = 'block';
      // í˜„ì¬ ì–¸ì–´ì˜ ì§ˆë¬¸ë“¤ì„ ì„ê¸°
      translations[currentLang].questions = shuffleArray([...translations[currentLang].questions]);
      currentQuestionIndex = 0;
      totalScore = 0;
      renderQuestion();
    }

    // Instagram ê³µìœ  í•¨ìˆ˜ ì¶”ê°€
    function shareToInstagram() {
      // Instagram ê³µìœ  ë¡œì§ êµ¬í˜„
      // ì‹¤ì œ êµ¬í˜„ì‹œì—ëŠ” ì›¹ ê³µìœ  APIë‚˜ ë”¥ë§í¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤
      alert('Instagram ê³µìœ  ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ë  ì˜ˆì •ì…ë‹ˆë‹¤.');
    }

    // ì´ë¯¸ì§€ ì €ì¥ í•¨ìˆ˜ ì¶”ê°€
    async function saveAsImage() {
      try {
        // ì €ì¥ ë²„íŠ¼ ìˆ¨ê¸°ê¸° (ì´ë¯¸ì§€ì— í¬í•¨ë˜ì§€ ì•Šë„ë¡)
        const buttons = document.querySelectorAll('.result-button');
        buttons.forEach(button => button.style.display = 'none');

        // ê²°ê³¼ divë¥¼ ì´ë¯¸ì§€ë¡œ ë³€í™˜
        const element = document.getElementById('result');
        const canvas = await html2canvas(element, {
          backgroundColor: '#f1f8e9',
          scale: 2, // ë” ì„ ëª…í•œ ì´ë¯¸ì§€ë¥¼ ìœ„í•´ 2ë°° í¬ê¸°ë¡œ ë Œë”ë§
        });

        // ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê²Œ í•˜ê¸°
        buttons.forEach(button => button.style.display = 'block');

        // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
        const link = document.createElement('a');
        link.download = 'my-chill-result.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
      } catch (err) {
        console.error('ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:', err);
        alert('ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      }
    }

    // BGM ê´€ë ¨ ì½”ë“œ ì¶”ê°€
    const bgm = document.getElementById('bgm');
    const musicToggle = document.getElementById('musicToggle');
    let isMusicPlaying = false;

    // BGM í† ê¸€ í•¨ìˆ˜
    function toggleMusic() {
        if (isMusicPlaying) {
            bgm.pause();
            musicToggle.textContent = 'ğŸ”ˆX';
        } else {
            bgm.play();
            musicToggle.textContent = 'ğŸ”Š';
        }
        isMusicPlaying = !isMusicPlaying;
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì¬ìƒ
    window.addEventListener('load', () => {
        bgm.volume = 0.5; // ë³¼ë¥¨ 50%ë¡œ ì„¤ì •
        // ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í•„ìš”í•œ ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•œ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('click', () => {
            if (!isMusicPlaying) {
                bgm.play();
                isMusicPlaying = true;
                musicToggle.textContent = 'ğŸ”Š';
            }
        }, { once: true });
    });

    // ìŒì•… í† ê¸€ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    musicToggle.addEventListener('click', toggleMusic);
  </script>
</body>
</html>